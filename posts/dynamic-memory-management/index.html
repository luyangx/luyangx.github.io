<!DOCTYPE html>

<html lang="zh-cn">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Dynamic Memory Management | 扬</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://www.luyang.ink/css/main.min.15431d6c334f65809fe2bc329da3f2c81c6e3027ab1e25b56afb2bb85fa7fd64.css"/>

    
    
    

    
    
 
    </head>

    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">扬</a>
    </div>  
</header>

  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">About</a>
  
    <a class="color-link nav-link" href="/tags/">Tags</a>
  
  <a class="color-link nav-link" href="https://www.luyang.ink/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        
    <a class="social-icon" href="0xd1ef@gmail.com" target="_blank" rel="noopener" title="Email">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M25.2794292,5.59128519 L14,16.8707144 L2.72057081,5.59128519 C3.06733103,5.30237414 3.51336915,5.12857603 4,5.12857603 L24,5.12857603 C24.4866308,5.12857603 24.932669,5.30237414 25.2794292,5.59128519 Z M25.9956978,6.99633695 C25.998551,7.04004843 26,7.08414302 26,7.12857603 L26,20.871424 C26,21.0798433 25.9681197,21.2808166 25.9089697,21.4697335 L18.7156355,14.2763993 L25.9956978,6.99633695 Z M24.9498374,22.6319215 C24.6672737,22.7846939 24.3437653,22.871424 24,22.871424 L4,22.871424 C3.5268522,22.871424 3.09207889,22.7071233 2.74962118,22.432463 L10.0950247,15.0870594 L13.9848068,18.9768415 L14.1878486,18.7737996 L14.2030419,18.7889929 L17.6549753,15.3370594 L24.9498374,22.6319215 Z M2.00810114,21.0526627 C2.00273908,20.9929669 2,20.9325153 2,20.871424 L2,7.12857603 C2,7.08414302 2.00144896,7.04004843 2.00430222,6.99633695 L9.03436454,14.0263993 L2.00810114,21.0526627 Z"></path>
        </svg>
    </a>
    

    

    
    <a class="social-icon" href="https://twitter.com/luyangx" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://weibo.com/0xd1ef" target="_blank" rel="noopener" title="Weibo">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M11.7643305,23.68043 C16.3966564,23.2245381 19.9124334,20.3848721 19.6072176,17.3404411 C19.3097287,14.2998735 15.3071519,12.2019978 10.6709625,12.6617533 C6.03863666,13.1215087 2.52285972,15.9573112 2.82421203,19.0017422 C3.12556434,22.0423098 7.12814116,24.1401855 11.7643305,23.68043 Z M21.0328458,13.5774007 C22.6400581,14.075791 24.4288545,15.2812003 24.424991,17.4061204 C24.424991,20.9180339 19.3599541,25.3417312 11.7450131,25.3417312 C5.93818589,25.3417312 -2.23820962e-13,22.5252462 -2.23820962e-13,17.8967838 C-2.23820962e-13,15.4743748 1.53380598,12.6733438 4.17257044,10.0345793 C7.69993785,6.50721189 11.8145559,4.89999957 13.3599524,6.44925952 C14.0399268,7.13309745 14.1056062,8.31146225 13.6690317,9.72163652 C13.4372222,10.4286554 14.3335521,10.0384428 14.3335521,10.0384428 C17.1848086,8.84462403 19.6728969,8.77508119 20.5808173,10.0732142 C21.0676172,10.7686426 21.0212553,11.7383789 20.5730903,12.8626548 C20.3683253,13.3803626 20.6387697,13.4576325 21.0328458,13.5774007 Z M26.0901557,5.1047646 C27.9291775,7.14082443 28.4275678,9.91867457 27.6394156,12.3488105 C27.6394156,12.3488105 27.6394156,12.352674 27.6394156,12.352674 C27.4578316,12.9128802 26.8551269,13.2219595 26.2910572,13.0403754 C25.7269875,12.8587913 25.4179082,12.2560867 25.5994923,11.692017 C26.1596985,9.96117297 25.8042573,7.98692899 24.4983973,6.53811982 C23.1925373,5.08931064 21.2646553,4.5368314 19.4835858,4.91545354 C18.9040622,5.03908525 18.336129,4.67205359 18.2124973,4.09252992 C18.0888655,3.51686974 18.4558972,2.94507305 19.0354209,2.82144134 C21.5389631,2.28827956 24.2511339,3.06484128 26.0901557,5.1047646 Z M23.2659437,7.65466876 C24.1622736,8.64758598 24.4018101,9.99980788 24.0193244,11.1858997 C23.8609213,11.6726995 23.3432135,11.9354169 22.8564136,11.7808773 C22.3696137,11.6224742 22.1068963,11.1009029 22.261436,10.6179665 C22.450747,10.0384428 22.3309788,9.37778581 21.8944043,8.89098592 C21.4578298,8.40804953 20.8087633,8.22260195 20.2137857,8.35009716 C19.7192588,8.45827491 19.2285954,8.14146864 19.1204177,7.64307828 C19.0161034,7.14468793 19.3329097,6.65016106 19.8313,6.5458468 C21.0482998,6.2831294 22.3696137,6.66175153 23.2659437,7.65466876 Z M12.0193209,18.1710916 C12.1738606,17.8890568 12.0734098,17.576114 11.7952385,17.4756632 C11.5209306,17.3674855 11.1770799,17.4988442 11.0148133,17.7692886 C10.8564101,18.039733 10.9414069,18.3526757 11.2195783,18.464717 C11.4977496,18.5806217 11.8570543,18.449263 12.0193209,18.1710916 Z M10.5396038,20.0642023 C10.9800418,19.3417295 10.7482324,18.5188059 10.021896,18.2058631 C9.30328667,17.9045108 8.3760488,18.2135901 7.93174732,18.9090185 C7.48358235,19.6083104 7.69607436,20.438961 8.40695673,20.7634942 C9.12942957,21.091891 10.0914389,20.7789482 10.5396038,20.0642023 Z M12.224086,15.0030289 C14.5074092,15.5941431 15.6741836,17.7461076 14.7392187,19.8401198 C13.7926634,21.9766304 11.0727656,23.1202238 8.76239791,22.37457 C6.53702702,21.6559607 5.59047169,19.4537707 6.56793494,17.4717998 C7.52608075,15.5284637 10.0180325,14.4273687 12.224086,15.0030289 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/luyangx" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

</div>




	<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
	<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src="https://www.luyang.ink/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin="anonymous"></script>
</footer>
</nav>

        <div id="content" class="content-container">
        

<h1 class="post-title">Dynamic Memory Management</h1>
    
    <time>April 18, 2016</time>
    
    <div>
        <p>
        <p>&laquo;C in a Nutshell&raquo;笔记 - 内存管理</p>
<p><strong>malloc(), calloc()</strong> 分配一块新的内存</p>
<p><strong>realloc()</strong> 调整已分配内存块大小</p>
<p><strong>free()</strong> 释放已分配内存</p>
<h2 id="allocating-memory-dynamically">Allocating Memory Dynamically</h2>
<blockquote>
<p><strong>void *malloc( size_t size );</strong></p>
</blockquote>
<p>分配一块至少 size 大小的内存块, 其内容是未确定的</p>
<blockquote>
<p><strong>void *calloc( size_t count, size_t size );</strong></p>
</blockquote>
<p>分配一块至少 size * coount 大小的内存块, 换句话说, 可以有足够的空间装下 array 每个 size 大小的 element, 其内容初始化为0</p>
<p>2个函数返回 void 指针也叫 typeleff pointer(无类型指针). 指针的值为分配内存的第一个byte的地址, 失败返回 null pointer</p>
<p>如果将 void pointer 分配给其他类型的 pointer, compiler会隐式的将 void pointer 转换成合适的类型, 也可以显式的进行类型转换. pointer 什么类型, 访问内存内容就是什么类型</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;stdlib.h&gt; // Provides function prototypes</span><span style="color:#75715e">
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> { <span style="color:#66d9ef">long</span> key; } Record; <span style="color:#75715e">// A structure type
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">float</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">myFunc</span>( size_t n ) {
        <span style="color:#75715e">// Reserve storage for an object of type double
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">double</span> <span style="color:#f92672">*</span>dPtr <span style="color:#f92672">=</span> malloc( <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">double</span>) );
        <span style="color:#66d9ef">if</span> ( dptr <span style="color:#f92672">==</span> NULL ) { <span style="color:#75715e">// Insufficient memory
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> NULL;
        } <span style="color:#66d9ef">else</span> { <span style="color:#75715e">// Got the memory: use it
</span><span style="color:#75715e"></span>            <span style="color:#f92672">*</span>dPtr <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.07</span>;
        }
    }
</code></pre></div><p>calloc()在需要将申请的内存块初始化为0时很有用, 虽然速度会慢点</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#75715e">// Get storage for an object of type double
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">double</span> <span style="color:#f92672">*</span>dPtr <span style="color:#f92672">=</span> calloc( <span style="color:#ae81ff">1</span>, <span style="color:#66d9ef">sizeof</span>( <span style="color:#66d9ef">double</span> ) );

    <span style="color:#75715e">// Get storage for two objects of type Record
</span><span style="color:#75715e"></span>    Record <span style="color:#f92672">*</span>rPtr;
    <span style="color:#66d9ef">if</span> ( ( rPtr <span style="color:#f92672">=</span> calloc( <span style="color:#ae81ff">2</span>, <span style="color:#66d9ef">sizeof</span>(Record) ) <span style="color:#f92672">==</span> NULL ) {
        <span style="color:#75715e">/* Handle the insufficient-memory error ... */</span>
    }

    <span style="color:#75715e">// Get storage for an array of n elements of type float
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">float</span> <span style="color:#f92672">*</span>fPtr <span style="color:#f92672">=</span> calloc( n, <span style="color:#66d9ef">sizeof</span>(<span style="color:#66d9ef">float</span>));
</code></pre></div><h2 id="characteristics-of-allocated-memory">Characteristics of Allocated Memory</h2>
<p>一块申请成功的内存块有一个指向其开始地址的 pointer, 该内存是对齐的</p>
<p>已分配内存的 lifetime 为, 从开始分配到释放, 或是程序结束</p>
<h2 id="resizing-and-releasing-memory">Resizing and Releasing Memory</h2>
<p>已分配的内存不在需要可以还给操作系统, 也可以通过调用 realloc() 增加或减少其大小</p>
<blockquote>
<p><strong>void free( void *ptr ):</strong></p>
</blockquote>
<p>释放 ptr 指向开始地址的动态分配的内存块, null pointer 也可以, 只不过没啥影响</p>
<blockquote>
<p>*<em>void <em>realloc( void *ptr, size_t size );</em></em></p>
</blockquote>
<p>释放 ptr 指向的内存块同时申请一块新的大小为 size 的内存块, 返回其内存地址, 该新地址可能与 ptr 相同. 会保留原内存块中的内容, 或是将原始内容 copy 到新内存块中. 如果新内存块比旧内存块大, 额外的 byte 内容未指定</p>
<p>可以传递一个 null pointer, 这样类似于 malloc()</p>
<p>不能分配一块指定大小的内存块, 返回一个 null pointer, 不会释放原内存块或修改它的内容</p>
<p>传递给 free() 和 realloc() 的参数, 如果不是一个 null pointer, 必须是一个指向一块动态分配的内存开始地址的 pointer并且该内存块没有被 free 过. 否则程序行为未定义</p>
<p>内存管理函数维护每块分配内存的信息, 这也就是 free() 和 realloc() 只需要一个 pointer. 也无需判断 free() 是否调用成功, 因为它没有返回值</p>
<h2 id="an-all-purpose-binary-tree">An All-Purpose Binary Tree</h2>
<p>动态分配内存是实现动态数据结构的基础, 例如 linked list, tree</p>
<p>binary search tree(BST) 二叉搜索树, 按照节点值排放每个节点, 在查找数据时可以运用二分查找算法 binary search algorithm</p>
<h3 id="characteristics">Characteristics</h3>
<p>二叉树由一些数据 node 组成, 结构特点:</p>
<ul>
<li>每个 node 最多有2个直接子节点</li>
<li>有一个 node 是 tree 的根节点, 成为 root, 没有父节点, 其他节点都有一个父节点</li>
<li>node 的排放根据如下规则: 节点的值大于或等于其左分支后代节点的值, 小余或等于其右分钟后代节点的值
<img src="/images/14600966817796.jpg" alt=""></li>
</ul>
<p>没有子节点的节点称作 leaf (叶子节点), 每一个 node 都可以与其后代节点组成一个 subtree(子树), 该 node 为该 subtree 的 root 节点</p>
<p>二叉树一个重要的属性 height, 从 root 到 leaf 最长 path. 也就是 该 path 经过的 node 数量, 不包括 root. 只有一个 root node 的 tree, 其 height 为0</p>
<h3 id="implementation">Implementation</h3>
<p>BSTree.h</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">GetKeyFunc_t</span>( <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>dData );
    <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">CmpFunc_t</span>( <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey1, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey2 );

    <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> Node {
        <span style="color:#66d9ef">struct</span> Node <span style="color:#f92672">*</span>left, <span style="color:#f92672">*</span>right;
        size_t size;
        <span style="color:#66d9ef">char</span> data[];
    } Node_t;

    <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> {
        <span style="color:#66d9ef">struct</span> Node <span style="color:#f92672">*</span>pRoot;
        CmpFunc_t <span style="color:#f92672">*</span>cmp;
        GetKeyFunc_t <span style="color:#f92672">*</span>getKey;
    } BST_t;

    <span style="color:#75715e">// 初始化 BST
</span><span style="color:#75715e"></span>    BST_t <span style="color:#f92672">*</span><span style="color:#a6e22e">newBST</span>( CmpFunc_t <span style="color:#f92672">*</span>cmp, GetKeyFunc_t <span style="color:#f92672">*</span>getKey);
    <span style="color:#75715e">// 插入一个节点
</span><span style="color:#75715e"></span>    _Bool <span style="color:#a6e22e">BST_insert</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData, size_t size);
    <span style="color:#75715e">// 搜索
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">BST_search</span>(BST_t <span style="color:#f92672">*</span>pBst, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey);
    <span style="color:#75715e">// 删除一个节点
</span><span style="color:#75715e"></span>    _Bool <span style="color:#a6e22e">BST_erase</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey);
    <span style="color:#75715e">// 清空树
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">BST_clear</span>(BST_t <span style="color:#f92672">*</span>pBST);
    <span style="color:#75715e">// 树的遍历顺序
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// 中序
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">BST_inorder</span>(BST_t <span style="color:#f92672">*</span>pBst, _Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData));
    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">BST_rev_inorder</span>(BST_t <span style="color:#f92672">*</span>pBst, _Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData));
    <span style="color:#75715e">// 前序
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">BST_preorder</span>(BST_t <span style="color:#f92672">*</span>pBST, __Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData));
    <span style="color:#75715e">// 后序
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">BST_postorder</span>(BST_t <span style="color:#f92672">*</span>pBST, _Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData));
</code></pre></div><h3 id="generationg-an-empty-tree">Generationg an Empty Tree</h3>
<p>创建一个新的 BST</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">defaultGetKey</span>(<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData) {
        <span style="color:#66d9ef">return</span> pData;
    }

    BST_t <span style="color:#f92672">*</span><span style="color:#a6e22e">newBST</span>(CmpFunc_t <span style="color:#f92672">*</span>cmp, GetKeyFunc_t <span style="color:#f92672">*</span>getKey) {
        BST_t <span style="color:#f92672">*</span>pBST <span style="color:#f92672">=</span> NULL;
        <span style="color:#66d9ef">if</span> (cmp <span style="color:#f92672">!=</span> NULL) {
            pBST <span style="color:#f92672">=</span> malloc(<span style="color:#66d9ef">sizeof</span>(BST_t));
        }
        <span style="color:#66d9ef">if</span> (pBST <span style="color:#f92672">!=</span> NULL) {
            pBST<span style="color:#f92672">-&gt;</span>pRoot <span style="color:#f92672">=</span> NULL;
            pBST<span style="color:#f92672">-&gt;</span>cmp <span style="color:#f92672">=</span> cmp;
            pBST<span style="color:#f92672">-&gt;</span>getKey <span style="color:#f92672">=</span> (getKey <span style="color:#f92672">!=</span> NULL) <span style="color:#f92672">?</span> getKey : defaultGetKey;
        }

        <span style="color:#66d9ef">return</span> pBST;
    }
</code></pre></div><h3 id="inserting-new-data">Inserting New Data</h3>
<p>插入新数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">static</span> _Bool <span style="color:#a6e22e">insert</span>(BST_t <span style="color:#f92672">*</span>pBST, Node_t <span style="color:#f92672">**</span>ppNode, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData, size_t size);

    _Bool <span style="color:#a6e22e">BST_insert</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData, size_t size) {
        <span style="color:#66d9ef">if</span> (pBST <span style="color:#f92672">==</span> NULL <span style="color:#f92672">||</span> pData <span style="color:#f92672">==</span> NULL <span style="color:#f92672">||</span> size <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) {
            <span style="color:#66d9ef">return</span> false;
        }
        <span style="color:#66d9ef">return</span> insert(pBST, <span style="color:#f92672">&amp;</span>(pBST<span style="color:#f92672">-&gt;</span>pRoot), pData, size);
    }

    <span style="color:#66d9ef">static</span> _Bool <span style="color:#a6e22e">insert</span>(BST_t <span style="color:#f92672">*</span>pBST, Node_t <span style="color:#f92672">**</span>ppNode, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData, size_t size) {
        Node_t <span style="color:#f92672">*</span>pNode <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>ppNode; <span style="color:#75715e">// Pointer to the root node of the subtree to insert the new node in.
</span><span style="color:#75715e"></span>
   <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">==</span> NULL) {
        pNode <span style="color:#f92672">=</span> malloc(<span style="color:#66d9ef">sizeof</span>(Node_t) <span style="color:#f92672">+</span> size);
        <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">!=</span> NULL) {
            <span style="color:#75715e">// Thers is a place for a new leaf here.
</span><span style="color:#75715e"></span>            pNode<span style="color:#f92672">-&gt;</span>left <span style="color:#f92672">=</span> pNode<span style="color:#f92672">-&gt;</span>right <span style="color:#f92672">=</span> NULL; <span style="color:#75715e">// Initialize the new node&#39;s members
</span><span style="color:#75715e"></span>            memcpy(pNode<span style="color:#f92672">-&gt;</span>data, pData, size);
            <span style="color:#f92672">*</span>ppNode <span style="color:#f92672">=</span> pNode;
            <span style="color:#66d9ef">return</span> true;
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">return</span> false;
        }
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>key1 <span style="color:#f92672">=</span> pBST<span style="color:#f92672">-&gt;</span>getKey(pData),
                   <span style="color:#f92672">*</span>key2 <span style="color:#f92672">=</span> pBST<span style="color:#f92672">-&gt;</span>getKey(pNode<span style="color:#f92672">-&gt;</span>data);
        <span style="color:#66d9ef">if</span> (pBST<span style="color:#f92672">-&gt;</span>cmp(key1, key2) <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) { <span style="color:#75715e">// in the left subtree
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> insert(pBST, <span style="color:#f92672">&amp;</span>(pNode<span style="color:#f92672">-&gt;</span>left), pData, size);
        } <span style="color:#66d9ef">else</span> { <span style="color:#75715e">// in the right subtree
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> insert(pBST, <span style="color:#f92672">&amp;</span>(pNode<span style="color:#f92672">-&gt;</span>right), pData, size);
        }
    }
</code></pre></div><h3 id="finding-data-in-the-tree">Finding Data in the Tree</h3>
<p>binary search algorithm(二分查找)来查找数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">search</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> Node_t <span style="color:#f92672">*</span>pNode, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey);

    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">BST_search</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey) {
        <span style="color:#66d9ef">if</span> (pBST <span style="color:#f92672">==</span> NULL <span style="color:#f92672">||</span> pKey <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> NULL;
        }

        <span style="color:#66d9ef">return</span> search(pBST, pBST<span style="color:#f92672">-&gt;</span>pRoot, pKey); <span style="color:#75715e">// Start at the root of the tree
</span><span style="color:#75715e"></span>    }

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">search</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> Node_t <span style="color:#f92672">*</span>pNode, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey) {
        <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> NULL;
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#75715e">// Compare data
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">int</span> cmp_res <span style="color:#f92672">=</span> pBST<span style="color:#f92672">-&gt;</span>cmp(pKey, pBST<span style="color:#f92672">-&gt;</span>getKey(pNode<span style="color:#f92672">-&gt;</span>data));
            <span style="color:#66d9ef">if</span> (cmp_res <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>) { <span style="color:#75715e">// Found a match
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> pNode<span style="color:#f92672">-&gt;</span>data;
            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (cmp_res <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) { <span style="color:#75715e">// Continue the search in the left subtree
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> search(pBST, pNode<span style="color:#f92672">-&gt;</span>left, pKey);
            } <span style="color:#66d9ef">else</span> { <span style="color:#75715e">// or in the right subtree
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">return</span> search(pBST, pNode<span style="color:#f92672">-&gt;</span>right, pKey);
            }
        }
    }
</code></pre></div><h3 id="removing-data-from-the-tree">Removing Data from the Tree</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">static</span> Node_t <span style="color:#f92672">*</span><span style="color:#a6e22e">detachMin</span>(Node_t <span style="color:#f92672">**</span>ppNode) {
        Node_t <span style="color:#f92672">*</span>pNode <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>ppNode; <span style="color:#75715e">// A pointer to the current node
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> NULL;
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (pNode<span style="color:#f92672">-&gt;</span>left <span style="color:#f92672">!=</span> NULL) {
            <span style="color:#66d9ef">return</span> detachMin( <span style="color:#f92672">&amp;</span>(pNode<span style="color:#f92672">-&gt;</span>left) ); <span style="color:#75715e">// The minimum is in the left subtree
</span><span style="color:#75715e"></span>        } <span style="color:#66d9ef">else</span> {
            <span style="color:#f92672">*</span>ppNode <span style="color:#f92672">=</span> pNode<span style="color:#f92672">-&gt;</span>right; <span style="color:#75715e">// pNode points to the minimum node
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">return</span> pNode; <span style="color:#75715e">// Attach the right child to the parent
</span><span style="color:#75715e"></span>        }
    }

    <span style="color:#66d9ef">static</span> _Bool <span style="color:#a6e22e">erase</span>(BST_t <span style="color:#f92672">*</span>pBsT, Node_t <span style="color:#f92672">**</span>ppNode, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey);

    _Bool <span style="color:#a6e22e">BST_erase</span>(BST_t <span style="color:#f92672">*</span>pBST, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey) {
        <span style="color:#66d9ef">if</span> (pBST <span style="color:#f92672">==</span> NULL <span style="color:#f92672">||</span> pKey <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> false;
        }
        <span style="color:#66d9ef">return</span> erase(pBST, <span style="color:#f92672">&amp;</span>(pBST<span style="color:#f92672">-&gt;</span>pRoot), pKey); <span style="color:#75715e">// Start at the root of the tree
</span><span style="color:#75715e"></span>    }

    <span style="color:#66d9ef">static</span> _Bool <span style="color:#a6e22e">erase</span>(BST_t <span style="color:#f92672">*</span>pBST, Node_t <span style="color:#f92672">**</span>ppNode, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pKey) {
        Node_t <span style="color:#f92672">*</span>pNode <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>ppNode; <span style="color:#75715e">// Pointer to the current node
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> false;
        }

        <span style="color:#66d9ef">int</span> cmp_res <span style="color:#f92672">=</span> pBST<span style="color:#f92672">-&gt;</span>cmp(pKey, pBST<span style="color:#f92672">-&gt;</span>getKey(pNode<span style="color:#f92672">-&gt;</span>data));

        <span style="color:#66d9ef">if</span> (cmp_res <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
            <span style="color:#66d9ef">return</span> erase(pBst, <span style="color:#f92672">&amp;</span>(pNode<span style="color:#f92672">-&gt;</span>left), pKey);
        } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (cmp_res <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
            <span style="color:#66d9ef">return</span> erase(pBst, <span style="color:#f92672">&amp;</span>(pNode<span style="color:#f92672">-&gt;</span>right), pKey);
        } <span style="color:#66d9ef">else</span> {    <span style="color:#75715e">// Found the node to be deleted
</span><span style="color:#75715e"></span>            <span style="color:#66d9ef">if</span> (pNode<span style="color:#f92672">-&gt;</span>left <span style="color:#f92672">==</span> NULL) {  <span style="color:#75715e">// If no more than one child
</span><span style="color:#75715e"></span>                <span style="color:#f92672">*</span>ppNode <span style="color:#f92672">=</span> pNode<span style="color:#f92672">-&gt;</span>right; <span style="color:#75715e">// attach the child to the parent
</span><span style="color:#75715e"></span>            } <span style="color:#66d9ef">else</span> <span style="color:#66d9ef">if</span> (pNode<span style="color:#f92672">-&gt;</span>right <span style="color:#f92672">==</span> NULL) {
                <span style="color:#f92672">*</span>ppNode <span style="color:#f92672">=</span> pNode<span style="color:#f92672">-&gt;</span>left;
            } <span style="color:#66d9ef">else</span> {    <span style="color:#75715e">// Graft is onto the deleted node&#39;s parent
</span><span style="color:#75715e"></span>                Node_t <span style="color:#f92672">*</span>pMin <span style="color:#f92672">=</span> detachMin(<span style="color:#f92672">&amp;</span>(pNode<span style="color:#f92672">-&gt;</span>right));
                <span style="color:#f92672">*</span>ppNode <span style="color:#f92672">=</span> pMin;
                pMin<span style="color:#f92672">-&gt;</span>left <span style="color:#f92672">=</span> pNode<span style="color:#f92672">-&gt;</span>left;
                pMin<span style="color:#f92672">-&gt;</span>right <span style="color:#f92672">=</span> pNode<span style="color:#f92672">-&gt;</span>right;
            }
            free(pNode);
            <span style="color:#66d9ef">return</span> true;
        }
    }

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">clear</span>(NOde_t <span style="color:#f92672">*</span>pNode);

    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">BST_clear</span>(BST_t <span style="color:#f92672">*</span>pBST) {
        <span style="color:#66d9ef">if</span> (pBST <span style="color:#f92672">!=</span> NULL) {
            clear(pBST<span style="color:#f92672">-&gt;</span>root);
            pBST<span style="color:#f92672">-&gt;</span>pRoot <span style="color:#f92672">=</span> NULL;
        }
    }

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">clear</span>(Node_t <span style="color:#f92672">*</span>pNode) {
        <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">!=</span> NULL) {
            clear(pNode<span style="color:#f92672">-&gt;</span>left);
            clear(pNode<span style="color:#f92672">-&gt;</span>right);
            free(pNode);
        }
    }
</code></pre></div><h3 id="traversiong-a-tree">Traversiong a Tree</h3>
<p>L = left subtree, R = right subtree, N = node itself</p>
<ul>
<li>
<p>In-order or LNR traversal
left subtree =&gt; node itself =&gt; right subtree</p>
</li>
<li>
<p>Pre-order or NLR traversal
node itself =&gt; left subtree =&gt; right subtree</p>
</li>
<li>
<p>Post-order or LRN traversal
left subtree =&gt; right subtree =&gt; node itself</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">inorder</span>(Node_t <span style="color:#f92672">*</span>pNode, _Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData));

    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">BST_inorder</span>(BST_t <span style="color:#f92672">*</span>pNST, _Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData)) {
        <span style="color:#66d9ef">if</span> (pBST <span style="color:#f92672">==</span> NULL <span style="color:#f92672">||</span> action <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        } <span style="color:#66d9ef">else</span> {
            <span style="color:#66d9ef">return</span> inorder(pBST<span style="color:#f92672">-&gt;</span>Root, action);
        }
    }

    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">inorder</span>(Node_t <span style="color:#f92672">*</span>pNode, _Bool (<span style="color:#f92672">*</span>action)(<span style="color:#66d9ef">void</span> <span style="color:#f92672">*</span>pData)) {
        <span style="color:#66d9ef">int</span> count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        <span style="color:#66d9ef">if</span> (pNode <span style="color:#f92672">==</span> NULL) {
            <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
        }

        count <span style="color:#f92672">=</span> inorder(pNode<span style="color:#f92672">-&gt;</span>left, action); <span style="color:#75715e">// L: Traverse the left tree
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">if</span> (action(pNode<span style="color:#f92672">-&gt;</span>data)) { <span style="color:#75715e">// N: Visit the current node itself
</span><span style="color:#75715e"></span>             <span style="color:#f92672">++</span>count;
        }

        count <span style="color:#f92672">+=</span> inorder(pNode<span style="color:#f92672">-&gt;</span>right, action); <span style="color:#75715e">// R: Traverse the right subtree
</span><span style="color:#75715e"></span>    }
</code></pre></div>
        </p>
    </div>
    

    

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="/tags/c">#C</a>
        
            <a class="tag" href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0">#学习笔记</a>
        
      
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css" crossorigin="anonymous">
<script type="text/javascript" src="/js/katex.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);" crossorigin="anonymous"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        
    <a class="social-icon" href="0xd1ef@gmail.com" target="_blank" rel="noopener" title="Email">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M25.2794292,5.59128519 L14,16.8707144 L2.72057081,5.59128519 C3.06733103,5.30237414 3.51336915,5.12857603 4,5.12857603 L24,5.12857603 C24.4866308,5.12857603 24.932669,5.30237414 25.2794292,5.59128519 Z M25.9956978,6.99633695 C25.998551,7.04004843 26,7.08414302 26,7.12857603 L26,20.871424 C26,21.0798433 25.9681197,21.2808166 25.9089697,21.4697335 L18.7156355,14.2763993 L25.9956978,6.99633695 Z M24.9498374,22.6319215 C24.6672737,22.7846939 24.3437653,22.871424 24,22.871424 L4,22.871424 C3.5268522,22.871424 3.09207889,22.7071233 2.74962118,22.432463 L10.0950247,15.0870594 L13.9848068,18.9768415 L14.1878486,18.7737996 L14.2030419,18.7889929 L17.6549753,15.3370594 L24.9498374,22.6319215 Z M2.00810114,21.0526627 C2.00273908,20.9929669 2,20.9325153 2,20.871424 L2,7.12857603 C2,7.08414302 2.00144896,7.04004843 2.00430222,6.99633695 L9.03436454,14.0263993 L2.00810114,21.0526627 Z"></path>
        </svg>
    </a>
    

    

    
    <a class="social-icon" href="https://twitter.com/luyangx" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    <a class="social-icon" href="https://weibo.com/0xd1ef" target="_blank" rel="noopener" title="Weibo">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M11.7643305,23.68043 C16.3966564,23.2245381 19.9124334,20.3848721 19.6072176,17.3404411 C19.3097287,14.2998735 15.3071519,12.2019978 10.6709625,12.6617533 C6.03863666,13.1215087 2.52285972,15.9573112 2.82421203,19.0017422 C3.12556434,22.0423098 7.12814116,24.1401855 11.7643305,23.68043 Z M21.0328458,13.5774007 C22.6400581,14.075791 24.4288545,15.2812003 24.424991,17.4061204 C24.424991,20.9180339 19.3599541,25.3417312 11.7450131,25.3417312 C5.93818589,25.3417312 -2.23820962e-13,22.5252462 -2.23820962e-13,17.8967838 C-2.23820962e-13,15.4743748 1.53380598,12.6733438 4.17257044,10.0345793 C7.69993785,6.50721189 11.8145559,4.89999957 13.3599524,6.44925952 C14.0399268,7.13309745 14.1056062,8.31146225 13.6690317,9.72163652 C13.4372222,10.4286554 14.3335521,10.0384428 14.3335521,10.0384428 C17.1848086,8.84462403 19.6728969,8.77508119 20.5808173,10.0732142 C21.0676172,10.7686426 21.0212553,11.7383789 20.5730903,12.8626548 C20.3683253,13.3803626 20.6387697,13.4576325 21.0328458,13.5774007 Z M26.0901557,5.1047646 C27.9291775,7.14082443 28.4275678,9.91867457 27.6394156,12.3488105 C27.6394156,12.3488105 27.6394156,12.352674 27.6394156,12.352674 C27.4578316,12.9128802 26.8551269,13.2219595 26.2910572,13.0403754 C25.7269875,12.8587913 25.4179082,12.2560867 25.5994923,11.692017 C26.1596985,9.96117297 25.8042573,7.98692899 24.4983973,6.53811982 C23.1925373,5.08931064 21.2646553,4.5368314 19.4835858,4.91545354 C18.9040622,5.03908525 18.336129,4.67205359 18.2124973,4.09252992 C18.0888655,3.51686974 18.4558972,2.94507305 19.0354209,2.82144134 C21.5389631,2.28827956 24.2511339,3.06484128 26.0901557,5.1047646 Z M23.2659437,7.65466876 C24.1622736,8.64758598 24.4018101,9.99980788 24.0193244,11.1858997 C23.8609213,11.6726995 23.3432135,11.9354169 22.8564136,11.7808773 C22.3696137,11.6224742 22.1068963,11.1009029 22.261436,10.6179665 C22.450747,10.0384428 22.3309788,9.37778581 21.8944043,8.89098592 C21.4578298,8.40804953 20.8087633,8.22260195 20.2137857,8.35009716 C19.7192588,8.45827491 19.2285954,8.14146864 19.1204177,7.64307828 C19.0161034,7.14468793 19.3329097,6.65016106 19.8313,6.5458468 C21.0482998,6.2831294 22.3696137,6.66175153 23.2659437,7.65466876 Z M12.0193209,18.1710916 C12.1738606,17.8890568 12.0734098,17.576114 11.7952385,17.4756632 C11.5209306,17.3674855 11.1770799,17.4988442 11.0148133,17.7692886 C10.8564101,18.039733 10.9414069,18.3526757 11.2195783,18.464717 C11.4977496,18.5806217 11.8570543,18.449263 12.0193209,18.1710916 Z M10.5396038,20.0642023 C10.9800418,19.3417295 10.7482324,18.5188059 10.021896,18.2058631 C9.30328667,17.9045108 8.3760488,18.2135901 7.93174732,18.9090185 C7.48358235,19.6083104 7.69607436,20.438961 8.40695673,20.7634942 C9.12942957,21.091891 10.0914389,20.7789482 10.5396038,20.0642023 Z M12.224086,15.0030289 C14.5074092,15.5941431 15.6741836,17.7461076 14.7392187,19.8401198 C13.7926634,21.9766304 11.0727656,23.1202238 8.76239791,22.37457 C6.53702702,21.6559607 5.59047169,19.4537707 6.56793494,17.4717998 C7.52608075,15.5284637 10.0180325,14.4273687 12.224086,15.0030289 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/luyangx" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

</div>




	<div class="footer-mobile-links">
		<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
		<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="https://www.luyang.ink/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin="anonymous"></script>
</footer>
    </body>
</html>