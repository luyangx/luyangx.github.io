<!DOCTYPE html>

<html lang="zh-cn">
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>

    <title>Declarations | 扬</title>
    
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#FF3DB4">
    <meta name="theme-color" content="#ffffff">

    
    
    
    <link rel="stylesheet" href="https://www.luyang.ink/css/main.min.15431d6c334f65809fe2bc329da3f2c81c6e3027ab1e25b56afb2bb85fa7fd64.css"/>

    
    
    

    
    
 
    </head>

    <body>
        
<nav>
  <header>
    <div class="site-title">
        <a href="/">扬</a>
    </div>  
</header>

  <div class="nav-menu">
  
    <a class="color-link nav-link" href="/about/">About</a>
  
    <a class="color-link nav-link" href="/tags/">Tags</a>
  
  <a class="color-link nav-link" href="https://www.luyang.ink/index.xml" target="_blank" rel="noopener" type="application/rss+xml">RSS</a>
</div>
<footer class="footer">
	<div class="social-icons">
        
    <a class="social-icon" href="0xd1ef@gmail.com" target="_blank" rel="noopener" title="Email">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M25.2794292,5.59128519 L14,16.8707144 L2.72057081,5.59128519 C3.06733103,5.30237414 3.51336915,5.12857603 4,5.12857603 L24,5.12857603 C24.4866308,5.12857603 24.932669,5.30237414 25.2794292,5.59128519 Z M25.9956978,6.99633695 C25.998551,7.04004843 26,7.08414302 26,7.12857603 L26,20.871424 C26,21.0798433 25.9681197,21.2808166 25.9089697,21.4697335 L18.7156355,14.2763993 L25.9956978,6.99633695 Z M24.9498374,22.6319215 C24.6672737,22.7846939 24.3437653,22.871424 24,22.871424 L4,22.871424 C3.5268522,22.871424 3.09207889,22.7071233 2.74962118,22.432463 L10.0950247,15.0870594 L13.9848068,18.9768415 L14.1878486,18.7737996 L14.2030419,18.7889929 L17.6549753,15.3370594 L24.9498374,22.6319215 Z M2.00810114,21.0526627 C2.00273908,20.9929669 2,20.9325153 2,20.871424 L2,7.12857603 C2,7.08414302 2.00144896,7.04004843 2.00430222,6.99633695 L9.03436454,14.0263993 L2.00810114,21.0526627 Z"></path>
        </svg>
    </a>
    

    

    
    <a class="social-icon" href="luyangx" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    <a class="social-icon" href="%e6%89%acXss" target="_blank" rel="noopener" title="Weibo">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M11.7643305,23.68043 C16.3966564,23.2245381 19.9124334,20.3848721 19.6072176,17.3404411 C19.3097287,14.2998735 15.3071519,12.2019978 10.6709625,12.6617533 C6.03863666,13.1215087 2.52285972,15.9573112 2.82421203,19.0017422 C3.12556434,22.0423098 7.12814116,24.1401855 11.7643305,23.68043 Z M21.0328458,13.5774007 C22.6400581,14.075791 24.4288545,15.2812003 24.424991,17.4061204 C24.424991,20.9180339 19.3599541,25.3417312 11.7450131,25.3417312 C5.93818589,25.3417312 -2.23820962e-13,22.5252462 -2.23820962e-13,17.8967838 C-2.23820962e-13,15.4743748 1.53380598,12.6733438 4.17257044,10.0345793 C7.69993785,6.50721189 11.8145559,4.89999957 13.3599524,6.44925952 C14.0399268,7.13309745 14.1056062,8.31146225 13.6690317,9.72163652 C13.4372222,10.4286554 14.3335521,10.0384428 14.3335521,10.0384428 C17.1848086,8.84462403 19.6728969,8.77508119 20.5808173,10.0732142 C21.0676172,10.7686426 21.0212553,11.7383789 20.5730903,12.8626548 C20.3683253,13.3803626 20.6387697,13.4576325 21.0328458,13.5774007 Z M26.0901557,5.1047646 C27.9291775,7.14082443 28.4275678,9.91867457 27.6394156,12.3488105 C27.6394156,12.3488105 27.6394156,12.352674 27.6394156,12.352674 C27.4578316,12.9128802 26.8551269,13.2219595 26.2910572,13.0403754 C25.7269875,12.8587913 25.4179082,12.2560867 25.5994923,11.692017 C26.1596985,9.96117297 25.8042573,7.98692899 24.4983973,6.53811982 C23.1925373,5.08931064 21.2646553,4.5368314 19.4835858,4.91545354 C18.9040622,5.03908525 18.336129,4.67205359 18.2124973,4.09252992 C18.0888655,3.51686974 18.4558972,2.94507305 19.0354209,2.82144134 C21.5389631,2.28827956 24.2511339,3.06484128 26.0901557,5.1047646 Z M23.2659437,7.65466876 C24.1622736,8.64758598 24.4018101,9.99980788 24.0193244,11.1858997 C23.8609213,11.6726995 23.3432135,11.9354169 22.8564136,11.7808773 C22.3696137,11.6224742 22.1068963,11.1009029 22.261436,10.6179665 C22.450747,10.0384428 22.3309788,9.37778581 21.8944043,8.89098592 C21.4578298,8.40804953 20.8087633,8.22260195 20.2137857,8.35009716 C19.7192588,8.45827491 19.2285954,8.14146864 19.1204177,7.64307828 C19.0161034,7.14468793 19.3329097,6.65016106 19.8313,6.5458468 C21.0482998,6.2831294 22.3696137,6.66175153 23.2659437,7.65466876 Z M12.0193209,18.1710916 C12.1738606,17.8890568 12.0734098,17.576114 11.7952385,17.4756632 C11.5209306,17.3674855 11.1770799,17.4988442 11.0148133,17.7692886 C10.8564101,18.039733 10.9414069,18.3526757 11.2195783,18.464717 C11.4977496,18.5806217 11.8570543,18.449263 12.0193209,18.1710916 Z M10.5396038,20.0642023 C10.9800418,19.3417295 10.7482324,18.5188059 10.021896,18.2058631 C9.30328667,17.9045108 8.3760488,18.2135901 7.93174732,18.9090185 C7.48358235,19.6083104 7.69607436,20.438961 8.40695673,20.7634942 C9.12942957,21.091891 10.0914389,20.7789482 10.5396038,20.0642023 Z M12.224086,15.0030289 C14.5074092,15.5941431 15.6741836,17.7461076 14.7392187,19.8401198 C13.7926634,21.9766304 11.0727656,23.1202238 8.76239791,22.37457 C6.53702702,21.6559607 5.59047169,19.4537707 6.56793494,17.4717998 C7.52608075,15.5284637 10.0180325,14.4273687 12.224086,15.0030289 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/luyangx" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

</div>




	<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
	<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>

	<script src="https://www.luyang.ink/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin="anonymous"></script>
</footer>
</nav>

        <div id="content" class="content-container">
        

<h1 class="post-title">Declarations</h1>
    
    <time>April 5, 2016</time>
    
    <div>
        <p>
        <p>&laquo;C in a Nutshell&raquo;笔记 - 声明</p>
<h1 id="declarations">Declarations</h1>
<h2 id="storage-class-specifiers-存储类">Storage Class Specifiers 存储类</h2>
<p>变量与函数的可访问性(作用域范围)与生存期</p>
<ul>
<li>
<p><strong>auto</strong>
具有 automatic storage duration 性质. function 内部变量默认</p>
</li>
<li>
<p><strong>register</strong>
提示 compiler 访问这个变量越快越好, 理想状态. 把变量存放在某个 CPU 寄存器中, 但是有时把 register 声明的变量当成普通的 auto 变量</p>
</li>
<li>
<p><strong>static</strong>
具有内部链接. 变量是否有链接或内部链接依赖于该变量是定义在函数内部还是外部. 变量都具有 static storage duration 性质. 因此可以用来声明具有块作用域的局部变量</p>
</li>
<li>
<p><strong>extern</strong>
具有外部链接. 可以在任何地方访问 extern 声明的函数和变量, 具有 static storage duration 性质</p>
</li>
<li>
<p><strong>_Thread_local</strong>
没有 thread 都拥有自己单独的变量实例</p>
</li>
</ul>
<h2 id="type-qualifiers-类型限定符">Type Qualifiers 类型限定符</h2>
<ul>
<li>
<p><strong>const</strong>
静态的, 程序此后不能修它</p>
</li>
<li>
<p><strong>volatile</strong>
变量的值可能被其他程序或事件修改, volatile 告诉 compiler , 每次用到该变量时都有重新读取它的值, 即使没有被程序修改过. 常用在硬件接口, 一个值可以被外部事件修改, 避免 compiler 对此变量进行 cache, 造成数据不一致</p>
</li>
<li>
<p><strong>restrict</strong>
只限定指针变量, 除了通过该指针不会被其他方式修改, compiler 可以用某种优化技术进行优化, 也可以再不影响结果的情况下忽略 restrict</p>
</li>
<li>
<p><strong>_Atomit</strong>
array 不能为 atomic</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">volatile</span> <span style="color:#66d9ef">int</span> ticks;
</code></pre></div><p>ticks 不能被程序本身修改, 但是可以通过别的方式修改, 例如: 时间中断处理程序</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> limit <span style="color:#f92672">=</span> <span style="color:#ae81ff">10000</span>; <span style="color:#75715e">// A constant int object
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> { <span style="color:#66d9ef">double</span> x, y, r; } Circle; <span style="color:#75715e">// A structure type
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> Circle unit_circle <span style="color:#f92672">=</span> { <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span> }; <span style="color:#75715e">// A constant Circle object
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">const</span> floatv[] <span style="color:#f92672">=</span> { <span style="color:#ae81ff">1.0F</span>, <span style="color:#ae81ff">0.5F</span>, <span style="color:#ae81ff">0.25F</span> }; <span style="color:#75715e">// An array of constant float elements
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">volatile</span> <span style="color:#66d9ef">short</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">restrict</span> vsPtr; <span style="color:#75715e">// A restricted pointer to volatile short
</span></code></pre></div><p>对应指针类型, 星号(*) 右侧的限定符只限定指针, 而星号(*)左侧的限定符用来限定指针指向的变量</p>
<h2 id="declarations-and-definitions-申明和定义">Declarations and Definitions 申明和定义</h2>
<p>凡是被多次声明的变量或函数，必须有且只有一个声明是定义，如果有多个定义，或者一个定义都没有，链接器就无法完成链接。</p>
<p>标示符(identifier)的声明是定义的情况:</p>
<ul>
<li>声明一个函数, 如果他包含函数体时</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">     <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">iMax</span>( <span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b ); <span style="color:#75715e">// This is a declaration, not a definition
</span><span style="color:#75715e"></span>     <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">iMax</span>( <span style="color:#66d9ef">int</span> a, <span style="color:#66d9ef">int</span> b) { <span style="color:#75715e">// This is the function&#39;s definition
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">return</span> ( a <span style="color:#f92672">&gt;=</span>b <span style="color:#f92672">?</span> a : b );
     }
</code></pre></div><ul>
<li>如果为变量分配了存储空间就是定义(difinition). 包含初始化的声明都是定义, 而且函数块内部的声明都是定义, 除非包含一个 extern 的 storage class specifier</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">int</span> a <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>; <span style="color:#75715e">// Definition of a
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">double</span> b[]; <span style="color:#75715e">// Declaration of the array b, which is defined elsewhere in the program
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">func</span>() {
        <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">char</span> c; <span style="color:#75715e">// Declaration of c, not a definition
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">short</span> d; <span style="color:#75715e">// Definition of d
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">float</span> e; <span style="color:#75715e">// Definition of e
</span><span style="color:#75715e"></span>    }
</code></pre></div><p>如果再所有函数外部申明一个没有初始化并且没有指定 extern storage class specifier, 那么这个声明是个 tentative definition(试探性定义)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">int</span> i, v[]; <span style="color:#75715e">// Tentatiive definitions of i, v and j
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> j;
</code></pre></div><p>如果一个翻译单元(translation unit)已经包含了一个同名的标示符, 该标示符的的 tentative definition 是一个简单的声明. 否则 compiler 会使 tentative definition 成为一个定义. 因此 int i 和 j 会隐式初始化为0, int array v 初始化包含1个值为0的元素</p>
<h2 id="complex-declarators-复杂声明">Complex Declarators 复杂声明</h2>
<p>(), [ ], * 表示 function, array, pointer type</p>
<ul>
<li>
<p><strong>()</strong>
A function whose return value has the type&hellip;</p>
</li>
<li>
<p><strong><input disabled="" type="checkbox"> </strong>
An array whose elements have the type&hellip;</p>
</li>
<li>
<p><strong>*</strong>
A pointer to the type&hellip;</p>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">int</span> <span style="color:#f92672">*</span>abc[<span style="color:#ae81ff">10</span>]; <span style="color:#75715e">// An array of q0 elements whose thpe is pointer to int
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>abc)[<span style="color:#ae81ff">10</span>]; <span style="color:#75715e">// A pointer to a array of 10 elements whose type is int
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">int</span> (<span style="color:#f92672">*</span>fPtr)(<span style="color:#66d9ef">double</span> x); <span style="color:#75715e">// fPtr is a pointer to a function that has one double parameter and return int
</span></code></pre></div><p>解读复杂的声明符</p>
<ol>
<li>If a left parenthesis (() or bracket ([) appears immediately to the right, then interpret the pair of parentheses or brackets.</li>
<li>Otherwise, if an asterisk (*) appears to the le , interpret the asterisk.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span>(<span style="color:#f92672">*</span> fTab[])(<span style="color:#66d9ef">void</span>);
</code></pre></div><table>
<thead>
<tr>
<th>Step</th>
<th>Symbols interpreted</th>
<th>Meaning(read this column from the top douwn, as a sentence)</th>
</tr>
</thead>
</table>
<ol>
<li>Start with the identifier | fTab | fTab is&hellip;</li>
<li>Brackets to the right | fTab[] | an array whose elements have the type&hellip;</li>
<li>Asterisk to the left. | (* fTab[]) | pointer to&hellip;</li>
<li>Function parentheses (and parameter list) to the right. | (* fTab[])(void) | a function, with no parameters, whose return value has the type..</li>
<li>Asterisk to the left. | *(* fTab[])(void) | pointer to&hellip;</li>
<li>No more asterishs, parentheses, or brackets: read the type name. | char *(* fTab[])(void) | char.</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">float</span> (<span style="color:#f92672">*</span> func())[<span style="color:#ae81ff">3</span>][<span style="color:#ae81ff">10</span>];
    <span style="color:#75715e">// The identifier func is...
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// a function whose return value has the type...
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// pointer to...
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// an array of three elements of type array of ten elements of type...
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// float.
</span></code></pre></div><h2 id="type-names">Type Names</h2>
<p>(char *)ptr: char pointer or pointer ot char</p>
<p>unsigned char: The type unsigned char</p>
<p>unsigned char *: The type &ldquo;pointer to unsigned char&rdquo;</p>
<p>float *[]: The type &ldquo;array of pointer to float&rdquo;</p>
<p>float (*)[10]: The type &ldquo;pointer to an array of ten elements whose type is float&rdquo;</p>
<p>double *(double *): The type &ldquo;function whose only parameter has the type pointer to double, and which also returns a pointer to double&rdquo;</p>
<p>double (*)(): The type &ldquo;pointer to a function whose return value has the type double&rdquo;</p>
<p>int *(*(*)[10])(void): The type &ldquo;pointer to an array of ten elements whose type is pointer to a function with no paramemters which return s a pointer to int&rdquo;</p>
<h2 id="linkage-of-identifiers">Linkage of Identifiers</h2>
<h3 id="external-linkage">External Linkage</h3>
<p>external linkage 在整个程序种代表同一个 function 或 object. compiler 会将它们呈现给 linker, 对 linker 可见, 在其他翻译单元或库中连接它们 
extern 声明的 function 和 object(variable) 都具有 external linkage, 除了在同一作用域内, 一个标示符已被定义为 internal linkage, 第二次声明不能将其修改为 external</p>
<p>没有指定 storage class specifier 的 function 声明 或是 声明在所有 functions 外部没有指定 storage class specifier 的 object 都具有 external linkage</p>
<h3 id="internal-linkage">Internal Linkage</h3>
<p>internal linkage 在指定翻译单元内代表同一个 function 或 object. compiler 不会将它们呈现给 linker, 对 linker 不可见, 在其他单元不可用</p>
<p>在所有 functions 外部, 带有 static 的标示符都具有 internal linkage</p>
<p>不同翻译单元中具有相同名称的标示符没有冲突, 不能在同一翻译单元将已被声明为 internal linkage 的 object 重新声明为 external linkage</p>
<h3 id="no-linkage">No Linkage</h3>
<p>既没有 external 和 internal 的标示符具有 no linkage</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-C" data-lang="C">    <span style="color:#66d9ef">int</span> <span style="color:#a6e22e">func1</span>( <span style="color:#66d9ef">void</span> ); <span style="color:#75715e">// func1 has external linkage
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> a; <span style="color:#75715e">// a has external linkage
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; <span style="color:#75715e">// b has external linkage
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> c; <span style="color:#75715e">// c has internal linkage
</span><span style="color:#75715e"></span>
    <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">func2</span>( <span style="color:#66d9ef">int</span> d ) { <span style="color:#75715e">// func2 has internal linkage; d has no linkage
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">int</span> a; <span style="color:#75715e">// This a is the same as that above, with external linkage
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">int</span> b <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span>; <span style="color:#75715e">// This b has no linkage, and hides th external b declared above
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">extern</span> <span style="color:#66d9ef">int</span> c; <span style="color:#75715e">// This c is the same as that above, and retains internal linkage
</span><span style="color:#75715e"></span>        <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">int</span> e:; <span style="color:#75715e">// e has no linkage
</span><span style="color:#75715e"></span>    }
</code></pre></div><h2 id="storage-duration-of-objects">Storage Duration of Objects</h2>
<p>lifetime: 在程序运行期间, 每个 object 在某个时间段存在与内存某个地方. 这个时间段以外都无法访问这个 object</p>
<p>4种 storage duration: static, thread, automatic, allocated.</p>
<h3 id="static-storage-duration">Static Storage Duration</h3>
<p>定义在所有函数外部, 或通过 storage class specifier static 函数内部定义. 包括所有的 internal linkage 和 external linkage</p>
<p>在程序运行之前生成并初始化 static storage duration object. 程序的执行时间就是其 lifetime</p>
<h3 id="thread-storage-duration">Thread Storage Duration</h3>
<p>thread_local: _Thread_local 定义的标示符. 整个 thread 的运行时间是其 lifetime. 每个 thread 在 start 时, 分别初始化 object 的实例</p>
<h3 id="automatic-storage-duration">Automatic Storage Duration</h3>
<p>没有任何 storage class specifier 或是 指定 auto 都具有 automatic storage duration. function 的参数具有 automatic storage duration. 简称 automatic variables</p>
<p>任何 {} 块中划定了 automatic variables 的 lifetime. variable-length array 例外, 其 lifetime 开始于 point 的声明, 终于该标示符的作用域, 或在 jump 指令之前声明</p>
<h2 id="initialization">Initialization</h2>
<h3 id="implicit-initialization">Implicit Initialization</h3>
<p>任何 automatic variable 如果为进行初始化, 都有未定义的初始化值. 其他 static storage duration 都会隐式的初始化0, 除非确切的进行了初始化</p>
<ul>
<li>具有算数类型的 object, 默认初始化为 0</li>
<li>pointer object 默认为 NULL</li>
</ul>
<p>structure, array 按照上述规则进行初始化</p>
<h3 id="explicit-initialization">Explicit Initialization</h3>
<p>通过等号(=)显式的初始化 object 的值</p>
<p>static storage duration 一定是 constant expressions, automatic 不受此限制</p>
<p>length-variable array 不能初始化, const 必须要进行初始化并且后续不能修改它</p>
        </p>
    </div>
    

    

    <div class="page-footer">
        
        <hr class="footer-divider">
        
            <a class="tag" href="/tags/c">#C</a>
        
      
    </div>


        

<link rel="stylesheet" type="text/css" href="/css/katex.min.css" crossorigin="anonymous">
<script type="text/javascript" src="/js/katex.min.js" crossorigin="anonymous"></script>
<script type="text/javascript" src="/js/auto-render.min.js"onload="renderMathInElement(document.body);" crossorigin="anonymous"></script>

        </div>
        <footer class="footer-mobile">
	<div class="social-icons">
        
    <a class="social-icon" href="0xd1ef@gmail.com" target="_blank" rel="noopener" title="Email">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M25.2794292,5.59128519 L14,16.8707144 L2.72057081,5.59128519 C3.06733103,5.30237414 3.51336915,5.12857603 4,5.12857603 L24,5.12857603 C24.4866308,5.12857603 24.932669,5.30237414 25.2794292,5.59128519 Z M25.9956978,6.99633695 C25.998551,7.04004843 26,7.08414302 26,7.12857603 L26,20.871424 C26,21.0798433 25.9681197,21.2808166 25.9089697,21.4697335 L18.7156355,14.2763993 L25.9956978,6.99633695 Z M24.9498374,22.6319215 C24.6672737,22.7846939 24.3437653,22.871424 24,22.871424 L4,22.871424 C3.5268522,22.871424 3.09207889,22.7071233 2.74962118,22.432463 L10.0950247,15.0870594 L13.9848068,18.9768415 L14.1878486,18.7737996 L14.2030419,18.7889929 L17.6549753,15.3370594 L24.9498374,22.6319215 Z M2.00810114,21.0526627 C2.00273908,20.9929669 2,20.9325153 2,20.871424 L2,7.12857603 C2,7.08414302 2.00144896,7.04004843 2.00430222,6.99633695 L9.03436454,14.0263993 L2.00810114,21.0526627 Z"></path>
        </svg>
    </a>
    

    

    
    <a class="social-icon" href="luyangx" target="_blank" rel="noopener" title="Twitter">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M8.991284,24.971612 C19.180436,24.971612 24.752372,16.530224 24.752372,9.210524 C24.752372,8.970656 24.747512,8.731868 24.736496,8.494376 C25.818008,7.712564 26.758256,6.737 27.5,5.62622 C26.507372,6.067076 25.439252,6.364292 24.318752,6.498212 C25.462472,5.812628 26.340512,4.727444 26.754584,3.434036 C25.684088,4.068536 24.499004,4.53002 23.23724,4.778528 C22.226468,3.701876 20.786828,3.028388 19.193828,3.028388 C16.134404,3.028388 13.653536,5.509256 13.653536,8.567492 C13.653536,9.0023 13.702244,9.424904 13.797176,9.830552 C9.19346,9.599108 5.11106,7.39472 2.3792,4.04294 C1.903028,4.861364 1.629032,5.812628 1.629032,6.827072 C1.629032,8.74904 2.606972,10.445612 4.094024,11.438132 C3.185528,11.41016 2.331788,11.160464 1.585184,10.745096 C1.583888,10.768208 1.583888,10.791428 1.583888,10.815728 C1.583888,13.49888 3.493652,15.738584 6.028088,16.246508 C5.562932,16.373084 5.07326,16.44134 4.56782,16.44134 C4.210988,16.44134 3.863876,16.406024 3.526484,16.34144 C4.231724,18.542264 6.276596,20.143796 8.701412,20.18894 C6.805148,21.674696 4.416836,22.56008 1.821488,22.56008 C1.374476,22.56008 0.93362,22.534592 0.5,22.4834 C2.951708,24.054476 5.862524,24.971612 8.991284,24.971612"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    
    <a class="social-icon" href="%e6%89%acXss" target="_blank" rel="noopener" title="Weibo">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M11.7643305,23.68043 C16.3966564,23.2245381 19.9124334,20.3848721 19.6072176,17.3404411 C19.3097287,14.2998735 15.3071519,12.2019978 10.6709625,12.6617533 C6.03863666,13.1215087 2.52285972,15.9573112 2.82421203,19.0017422 C3.12556434,22.0423098 7.12814116,24.1401855 11.7643305,23.68043 Z M21.0328458,13.5774007 C22.6400581,14.075791 24.4288545,15.2812003 24.424991,17.4061204 C24.424991,20.9180339 19.3599541,25.3417312 11.7450131,25.3417312 C5.93818589,25.3417312 -2.23820962e-13,22.5252462 -2.23820962e-13,17.8967838 C-2.23820962e-13,15.4743748 1.53380598,12.6733438 4.17257044,10.0345793 C7.69993785,6.50721189 11.8145559,4.89999957 13.3599524,6.44925952 C14.0399268,7.13309745 14.1056062,8.31146225 13.6690317,9.72163652 C13.4372222,10.4286554 14.3335521,10.0384428 14.3335521,10.0384428 C17.1848086,8.84462403 19.6728969,8.77508119 20.5808173,10.0732142 C21.0676172,10.7686426 21.0212553,11.7383789 20.5730903,12.8626548 C20.3683253,13.3803626 20.6387697,13.4576325 21.0328458,13.5774007 Z M26.0901557,5.1047646 C27.9291775,7.14082443 28.4275678,9.91867457 27.6394156,12.3488105 C27.6394156,12.3488105 27.6394156,12.352674 27.6394156,12.352674 C27.4578316,12.9128802 26.8551269,13.2219595 26.2910572,13.0403754 C25.7269875,12.8587913 25.4179082,12.2560867 25.5994923,11.692017 C26.1596985,9.96117297 25.8042573,7.98692899 24.4983973,6.53811982 C23.1925373,5.08931064 21.2646553,4.5368314 19.4835858,4.91545354 C18.9040622,5.03908525 18.336129,4.67205359 18.2124973,4.09252992 C18.0888655,3.51686974 18.4558972,2.94507305 19.0354209,2.82144134 C21.5389631,2.28827956 24.2511339,3.06484128 26.0901557,5.1047646 Z M23.2659437,7.65466876 C24.1622736,8.64758598 24.4018101,9.99980788 24.0193244,11.1858997 C23.8609213,11.6726995 23.3432135,11.9354169 22.8564136,11.7808773 C22.3696137,11.6224742 22.1068963,11.1009029 22.261436,10.6179665 C22.450747,10.0384428 22.3309788,9.37778581 21.8944043,8.89098592 C21.4578298,8.40804953 20.8087633,8.22260195 20.2137857,8.35009716 C19.7192588,8.45827491 19.2285954,8.14146864 19.1204177,7.64307828 C19.0161034,7.14468793 19.3329097,6.65016106 19.8313,6.5458468 C21.0482998,6.2831294 22.3696137,6.66175153 23.2659437,7.65466876 Z M12.0193209,18.1710916 C12.1738606,17.8890568 12.0734098,17.576114 11.7952385,17.4756632 C11.5209306,17.3674855 11.1770799,17.4988442 11.0148133,17.7692886 C10.8564101,18.039733 10.9414069,18.3526757 11.2195783,18.464717 C11.4977496,18.5806217 11.8570543,18.449263 12.0193209,18.1710916 Z M10.5396038,20.0642023 C10.9800418,19.3417295 10.7482324,18.5188059 10.021896,18.2058631 C9.30328667,17.9045108 8.3760488,18.2135901 7.93174732,18.9090185 C7.48358235,19.6083104 7.69607436,20.438961 8.40695673,20.7634942 C9.12942957,21.091891 10.0914389,20.7789482 10.5396038,20.0642023 Z M12.224086,15.0030289 C14.5074092,15.5941431 15.6741836,17.7461076 14.7392187,19.8401198 C13.7926634,21.9766304 11.0727656,23.1202238 8.76239791,22.37457 C6.53702702,21.6559607 5.59047169,19.4537707 6.56793494,17.4717998 C7.52608075,15.5284637 10.0180325,14.4273687 12.224086,15.0030289 Z"></path>
        </svg>
    </a>
    

    

    

    

    

    

    

    

    

    
    
    
    <a class="social-icon" href="https://github.com/luyangx" target="_blank" rel="noopener" title="GitHub">
        <svg width="28px" height="28px" viewBox="0 0 28 28" version="1.1" fill="#ABABAB" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink">
            <path d="M13.9988029,1.32087331 C6.82105037,1.32087331 1,7.14112562 1,14.3212723 C1,20.0649109 4.72454649,24.9370678 9.89038951,26.6560892 C10.5408085,26.7757983 10.7778323,26.374374 10.7778323,26.0296121 C10.7778323,25.7215609 10.7666595,24.9035493 10.760275,23.8189856 C7.14426471,24.6042767 6.38131925,22.0760223 6.38131925,22.0760223 C5.78995672,20.5740732 4.93762853,20.1742451 4.93762853,20.1742451 C3.75729765,19.3682044 5.02701126,19.3841656 5.02701126,19.3841656 C6.33183953,19.4759425 7.01817121,20.7241085 7.01817121,20.7241085 C8.17775254,22.7104801 10.0611744,22.1366749 10.8017741,21.8038838 C10.919887,20.9643246 11.2558703,20.3913175 11.6269683,20.066507 C8.74038491,19.7385043 5.70536235,18.6228163 5.70536235,13.6413251 C5.70536235,12.2223743 6.21213051,11.0611968 7.04370914,10.1530044 C6.90963504,9.82420367 6.46351945,8.50181809 7.17139875,6.71256734 C7.17139875,6.71256734 8.26234691,6.36301702 10.7459099,8.04532771 C11.78259,7.75642995 12.8950858,7.61277914 14.000399,7.60719272 C15.1049142,7.61277914 16.2166119,7.75642995 17.2548881,8.04532771 C19.736855,6.36301702 20.8262071,6.71256734 20.8262071,6.71256734 C21.5356825,8.50181809 21.0895669,9.82420367 20.9562909,10.1530044 C21.7894656,11.0611968 22.2922435,12.2223743 22.2922435,13.6413251 C22.2922435,18.6355852 19.2524325,19.734514 16.3570705,20.0561322 C16.8231376,20.4575564 17.2389269,21.2508282 17.2389269,22.4638795 C17.2389269,24.2012564 17.2229657,25.603448 17.2229657,26.0296121 C17.2229657,26.3775663 17.4575954,26.7821827 18.116793,26.6552912 C23.2786458,24.9322794 27,20.0633148 27,14.3212723 C27,7.14112562 21.1789496,1.32087331 13.9988029,1.32087331"></path>
        </svg>
    </a>
    

    
    
    

    

    

    

    

    

</div>




	<div class="footer-mobile-links">
		<p><a href="https://github.com/kimcc/hugo-theme-noteworthy" target="_blank" rel="noopener">Noteworthy theme</a></p>
		<span class="divider-bar">|</span>
		<p><a href="https://gohugo.io" target="_blank" rel="noopener">Built with Hugo</a></p>
	</div>

	<script src="https://www.luyang.ink/js/main.min.fa5c2b23e07b5d9bfad267a52b4b24fdb053e6fb7524993383594926a3ac270c.js" integrity="sha256-+lwrI+B7XZv60melK0sk/bBT5vt1JJkzg1lJJqOsJww=" crossorigin="anonymous"></script>
</footer>
    </body>
</html>